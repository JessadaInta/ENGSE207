# Library Management System - Architecture

## C1: System Context Diagram

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ System User â”‚
â”‚ (à¸šà¸£à¸£à¸“à¸²à¸£à¸±à¸à¸©à¹Œ, à¹€à¸ˆà¹‰à¸²à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ, à¸œà¸¹à¹‰à¸”à¸¹à¹à¸¥à¸£à¸°à¸šà¸š) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ HTTP/JSON (CRUD Operations)
â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Library Management System â”‚
â”‚ â€¢ à¸ˆà¸±à¸”à¸à¸²à¸£à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­ (CRUD) â”‚
â”‚ â€¢ à¸¢à¸·à¸¡â€“à¸„à¸·à¸™à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­ â”‚
â”‚ â€¢ à¸à¸£à¸­à¸‡à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­à¸•à¸²à¸¡à¸ªà¸–à¸²à¸™à¸° â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ SQL Queries
â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SQLite Database â”‚
â”‚ (library.db) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

yaml
à¸„à¸±à¸”à¸¥à¸­à¸à¹‚à¸„à¹‰à¸”

### Actors
- **System User**: à¸šà¸£à¸£à¸“à¸²à¸£à¸±à¸à¸©à¹Œ, à¹€à¸ˆà¹‰à¸²à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ, à¸œà¸¹à¹‰à¸”à¸¹à¹à¸¥à¸£à¸°à¸šà¸šà¸—à¸µà¹ˆà¹ƒà¸Šà¹‰à¸£à¸°à¸šà¸šà¸ˆà¸±à¸”à¸à¸²à¸£à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­

### System
- **Library Management System**
  - à¸ˆà¸±à¸”à¸à¸²à¸£à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­ (CRUD)
  - à¸ˆà¸±à¸”à¸à¸²à¸£à¸à¸²à¸£à¸¢à¸·à¸¡â€“à¸„à¸·à¸™à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­
  - à¸à¸£à¸­à¸‡à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­à¸•à¸²à¸¡à¸ªà¸–à¸²à¸™à¸° (available / borrowed)

### External Systems
- **SQLite Database**: à¸à¸²à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹€à¸à¹‡à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­

---

## C2: Container Diagram - Layered Architecture

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CLIENT (Browser) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ HTTP/JSON
â–¼
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ LIBRARY MANAGEMENT SYSTEM â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â•‘
â•‘ â”‚ ğŸ“‹ PRESENTATION LAYER â”‚ â•‘
â•‘ â”‚ â€¢ Routes (bookRoutes.js) â”‚ â•‘
â•‘ â”‚ â€¢ Controllers (bookController.js) â”‚ â•‘
â•‘ â”‚ â€¢ Middlewares (errorHandler.js) â”‚ â•‘
â•‘ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â•‘
â•‘ â”‚ â•‘
â•‘ â–¼ â•‘
â•‘ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â•‘
â•‘ â”‚ ğŸ§  BUSINESS LOGIC LAYER â”‚ â•‘
â•‘ â”‚ â€¢ Services (bookService.js) â”‚ â•‘
â•‘ â”‚ â€¢ Validators (bookValidator.js) â”‚ â•‘
â•‘ â”‚ â”‚ â•‘
â•‘ â”‚ Business Rules: â”‚ â•‘
â•‘ â”‚ âœ“ Title, author, isbn required â”‚ â•‘
â•‘ â”‚ âœ“ ISBN format must be valid â”‚ â•‘
â•‘ â”‚ âœ“ Book status: available / borrowed â”‚ â•‘
â•‘ â”‚ âœ“ Borrowed book cannot be deleted â”‚ â•‘
â•‘ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â•‘
â•‘ â”‚ â•‘
â•‘ â–¼ â•‘
â•‘ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â•‘
â•‘ â”‚ ğŸ’¾ DATA ACCESS LAYER â”‚ â•‘
â•‘ â”‚ â€¢ Repositories (bookRepository.js) â”‚ â•‘
â•‘ â”‚ â€¢ Database (connection.js) â”‚ â•‘
â•‘ â”‚ â”‚ â•‘
â•‘ â”‚ Methods: â”‚ â•‘
â•‘ â”‚ â€¢ findAll(status) â”‚ â•‘
â•‘ â”‚ â€¢ findById(id) â”‚ â•‘
â•‘ â”‚ â€¢ create(bookData) â”‚ â•‘
â•‘ â”‚ â€¢ update(id, bookData) â”‚ â•‘
â•‘ â”‚ â€¢ updateStatus(id, status) â”‚ â•‘
â•‘ â”‚ â€¢ delete(id) â”‚ â•‘
â•‘ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â”‚ SQL
â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SQLite Database â”‚
â”‚ (library.db) â”‚
â”‚ â”‚
â”‚ Table: books â”‚
â”‚ - id â”‚
â”‚ - title â”‚
â”‚ - author â”‚
â”‚ - isbn â”‚
â”‚ - status â”‚
â”‚ - created_at â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

markdown
à¸„à¸±à¸”à¸¥à¸­à¸à¹‚à¸„à¹‰à¸”

---

## Layer Responsibilities

### 1. Presentation Layer
**à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ:**
- à¸£à¸±à¸š HTTP Request  
- Parse parameters  
- à¹€à¸£à¸µà¸¢à¸ Service  
- à¸ªà¹ˆà¸‡ HTTP Response  

**à¹„à¸Ÿà¸¥à¹Œ:**
- `bookRoutes.js` â€“ API endpoints  
- `bookController.js` â€“ HTTP handling  
- `errorHandler.js` â€“ Error handling  

**à¸«à¹‰à¸²à¸¡à¸—à¸³:**
- âŒ à¹€à¸‚à¸µà¸¢à¸™ SQL Query  
- âŒ à¹€à¸‚à¸µà¸¢à¸™ Business Logic  

---

### 2. Business Logic Layer
**à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ:**
- Validation  
- Business Rules  
- Calculations  
- à¹€à¸£à¸µà¸¢à¸ Repository  

**à¹„à¸Ÿà¸¥à¹Œ:**
- `bookService.js` â€“ Business logic  
- `bookValidator.js` â€“ Validation  

**Business Rules:**
- Title, author, isbn required  
- ISBN format à¸•à¹‰à¸­à¸‡à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡  
- à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­à¸¡à¸µà¸ªà¸–à¸²à¸™à¸° `available` à¸«à¸£à¸·à¸­ `borrowed`  
- à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­à¸—à¸µà¹ˆà¸–à¸¹à¸à¸¢à¸·à¸¡à¹à¸¥à¹‰à¸§ à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸¢à¸·à¸¡à¸«à¸£à¸·à¸­à¸–à¸¹à¸à¸¥à¸šà¸‹à¹‰à¸³à¹„à¸”à¹‰  

**à¸«à¹‰à¸²à¸¡à¸—à¸³:**
- âŒ à¹€à¸‚à¸µà¸¢à¸™ SQL Query  
- âŒ à¸ˆà¸±à¸”à¸à¸²à¸£ HTTP  

---

### 3. Data Access Layer
**à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ:**
- CRUD Operations  
- Execute SQL  
- Return data  

**à¹„à¸Ÿà¸¥à¹Œ:**
- `bookRepository.js` â€“ CRUD  
- `connection.js` â€“ DB connection  

**Methods:**
- `findAll(status)`
- `findById(id)`
- `create(bookData)`
- `update(id, bookData)`
- `updateStatus(id, status)`
- `delete(id)`

**à¸«à¹‰à¸²à¸¡à¸—à¸³:**
- âŒ Business Logic  
- âŒ Validation  

---

## Data Flow: Create Book

Client â†’ Controller â†’ Service â†’ Repository â†’ Database
â†“ parse â†“ validate â†“ SQL â†“ insert
â† response â† â† â† â† â† â† â† â† â† â†

markdown
à¸„à¸±à¸”à¸¥à¸­à¸à¹‚à¸„à¹‰à¸”

### Steps
1. Client à¸ªà¹ˆà¸‡ POST request à¸à¸£à¹‰à¸­à¸¡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­  
2. Controller parse request â†’ à¹€à¸£à¸µà¸¢à¸ Service  
3. Service validate à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹à¸¥à¸° ISBN â†’ à¹€à¸£à¸µà¸¢à¸ Repository  
4. Repository execute SQL INSERT  
5. Database insert record  
6. Response à¸à¸¥à¸±à¸šà¹„à¸›à¸¢à¸±à¸‡ Client  

---

## Summary

### Architecture Benefits
âœ… **Separation of Concerns** â€“ à¹à¸¢à¸ layer à¸Šà¸±à¸”à¹€à¸ˆà¸™  
âœ… **Maintainability** â€“ à¹à¸à¹‰à¹„à¸‚à¸‡à¹ˆà¸²à¸¢  
âœ… **Testability** â€“ Test à¹à¸¢à¸ layer à¹„à¸”à¹‰  
âœ… **Scalability** â€“ à¸‚à¸¢à¸²à¸¢à¸‡à¹ˆà¸²à¸¢  

### Key Principles
- Each layer has clear responsibilities  
- Dependencies flow downward  
- No layer skipping  
- Business rules stay in Business Layer  